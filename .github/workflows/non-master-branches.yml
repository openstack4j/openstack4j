name: Java CI

on:
    push:
        #  runs for every branch except master
        branches:
            - '*'
            - '!master'

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   name: Set up JDK 8
                uses: actions/setup-java@v2
                with:
                    java-version: '8'
                    distribution: 'adopt'
                    cache: 'maven'
            -   name: Build with Maven
                run: mvn install
            -   run: mkdir staging && cp core/target/openstack4j-core-*.jar staging
            -   uses: actions/upload-artifact@v2
                with:
                    name: Package
                    path: staging
